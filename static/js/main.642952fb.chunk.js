(this.webpackJsonpbarcode=this.webpackJsonpbarcode||[]).push([[0],[,,,,,,,,,,,,,function(e,a,t){},,function(e,a,t){e.exports=t.p+"static/media/type1.5261c7b9.jpg"},function(e,a,t){e.exports=t.p+"static/media/type2.16b3d61e.jpg"},function(e,a,t){e.exports=t.p+"static/media/type3.284fc72a.jpg"},,,,,function(e,a,t){e.exports=t(46)},,,,,function(e,a,t){},,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,,,,,,,,,,,,function(e,a,t){},function(e,a,t){"use strict";t.r(a);var c=t(0),l=t.n(c),r=t(14),n=t.n(r),s=(t(27),t(2)),m=t.n(s),d=t(4),o=t(1),i=(t(29),t(30),t(31),t(32),t(15)),p=t.n(i),E=t(16),v=t.n(E),u=t(17),N=t.n(u),y=t(18),b=t.n(y);var f=function(e){var a=e.code,t=e.desc,c=e.attr,r=e.mCode,n=e.qttInMem,s=e.onChange;return l.a.createElement("tr",null,l.a.createElement("td",{className:"t-code"},a),l.a.createElement("td",{className:"t-desc"},t),l.a.createElement("td",{className:"t-attr"},""===c?"-":c),l.a.createElement("td",{className:"t-fa-code"},""===r?"-":r),l.a.createElement("td",{className:"t-quantity"},l.a.createElement("input",{className:"inp-quantity",type:"number",min:1,max:999,value:n,onChange:function(e){return s(a,e.target.valueAsNumber)}})))};var h=function(e){var a=e.labels,t=e.setLabelsUniq,r=e.setModalActive,n=e.modalActive,s=e.setIsLoading,m=a.map((function(e){return{code:e.code,desc:e.desc,attr:e.attr,mCode:e.mCode,qtt:e.qtt}})),d=Object(c.useState)(m),i=Object(o.a)(d,2),p=i[0],E=i[1],v=function(e,a){var t=p.map((function(t){return a||(a=0),a>=999&&(a=999),t.code===e&&(t.qtt=a),t}));E(t)};return l.a.createElement("div",{className:n?"modal display-block":"modal display-none"},l.a.createElement("section",{className:"modal-qq"},l.a.createElement("div",{className:"t-top"},l.a.createElement("button",{className:"close-modal",tabIndex:"-1",onClick:function(){r(!1);var e=a.map((function(e){return{code:e.code,desc:e.desc,attr:e.attr,mCode:e.mCode,qtt:e.qtt}}));E(e)}},"\xd7")),l.a.createElement("table",{className:"t-lbls"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"t-code"},"C\xf3digo"),l.a.createElement("th",{className:"t-desc"},"Descripci\xf3n"),l.a.createElement("th",{className:"t-attr"},"Attr"),l.a.createElement("th",{className:"t-fa-code"},"C. Fab"),l.a.createElement("th",{className:"t-quantity"},"Cantidad"))),l.a.createElement("tbody",null,p.map((function(e,a){return l.a.createElement(f,{code:e.code,desc:e.desc,attr:e.attr,mCode:e.mCode,qttInMem:e.qtt,onChange:v,key:a})})))),l.a.createElement("div",{className:"bottom-btns"},l.a.createElement("button",{className:"btn btn-success",onClick:function(){r(!1);var e=p.map((function(e,t){return a[t].qtt=e.qtt,a[t]}));s(!0),setTimeout((function(){s(!1),t(e)}),1)}},"Aceptar"))))},g=t(6),j=t.n(g);t(13);var O=function(e){var a=e.label,t=a.code,c=a.desc,r=a.mCode,n=a.cats,s=a.price,m=a.attr,d=e.type;return e.id,1===d?l.a.createElement("div",{className:"type-1"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"top"},l.a.createElement("h2",{className:"price"},s),l.a.createElement("p",{className:"cat"},n)),l.a.createElement("div",{className:"middle"},l.a.createElement("div",{className:"d-attr"},l.a.createElement("p",{className:"attr"},m)),l.a.createElement("div",{className:"barcode"},l.a.createElement(j.a,{value:t,size:100,level:"H",renderAs:"svg"})),l.a.createElement("div",{className:"d-fa-code"},l.a.createElement("p",{className:"fa-code"},r))),l.a.createElement("div",{className:"bottom"},l.a.createElement("p",{className:"code"},t),l.a.createElement("p",{className:"desc"},c)))):2===d?l.a.createElement("div",{className:"type-2"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"left-side"},l.a.createElement("h2",{className:"price"},s),l.a.createElement("p",{className:"cat"},n),l.a.createElement("p",{className:"fa-code"},""===r?"-":r),l.a.createElement("p",{className:"desc"},c),l.a.createElement("p",{className:"attr"},m)),l.a.createElement("div",{className:"right-side"},l.a.createElement("div",{className:"barcode"},l.a.createElement(j.a,{value:t,size:50,level:"H",renderAs:"svg"})),l.a.createElement("p",{className:"code"},t)))):void 0},C=t(5),k=t(3),q=t(21),A=t(20),w=t(19),T=t.n(w),S=function(e){Object(q.a)(t,e);var a=Object(A.a)(t);function t(){return Object(C.a)(this,t),a.apply(this,arguments)}return Object(k.a)(t,[{key:"componentDidMount",value:function(){try{var e={bcid:this.props.codeType,text:this.props.value,scale:this.props.scale,includetext:!1,textxalign:"center"};T.a.toCanvas("".concat(this.props.id,"-canvas"),e)}catch(a){}}},{key:"render",value:function(){var e="".concat(this.props.id,"-canvas");return l.a.createElement("canvas",{id:e,style:{width:"100%",height:"100%"}})}}]),t}(c.Component);var x=function(e){var a,t=e.lblLeft,c=e.lblMid,r=e.lblRight,n=e.type,s=e.id,m=l.a.createElement("div",null),d=l.a.createElement("div",null);if(a=l.a.createElement("div",null,l.a.createElement("h2",{className:"price"},t.price),l.a.createElement("div",{className:"barcode"},l.a.createElement(S,{codeType:"microqrcode",value:t.code,scale:12,size:100,id:"".concat(s,"-l")})),l.a.createElement("p",{className:"code"},t.code)),c&&(m=l.a.createElement("div",null,l.a.createElement("h2",{className:"price"},c.price),l.a.createElement("div",{className:"barcode"},l.a.createElement(S,{codeType:"microqrcode",value:c.code,scale:12,size:100,id:"".concat(s,"-m")})),l.a.createElement("p",{className:"code"},c.code))),r&&(d=l.a.createElement("div",null,l.a.createElement("h2",{className:"price"},r.price),l.a.createElement("div",{className:"barcode"},l.a.createElement(S,{codeType:"microqrcode",value:r.code,scale:12,size:100,id:"".concat(s,"-r")})),l.a.createElement("p",{className:"code"},r.code))),3===n)return l.a.createElement("div",{className:"type-3"},l.a.createElement("div",{className:"container"},a,m,d))};var R=function(e){var a,t=e.bcType,c=function(e){for(var a=[],t=0;t<e.length;t++)for(var c=Object.assign({},e[t]),l=0;l<c.qtt;l++)a.push(c);return a}(e.labelsUniq);if(1===t)a=l.a.createElement("div",{id:"section-to-print-type1"},c.map((function(e,a){return l.a.createElement(O,{key:a,label:e,type:t,id:a})})));else if(2===t)a=l.a.createElement("div",{id:"section-to-print-type2"},c.map((function(e,a){return l.a.createElement(O,{key:a,label:e,type:t,id:a})})));else if(3===t){for(var r=[],n=[],s=[],m=c.length,d=0;d<m;d+=3)r.push(c[d]),n.push(d+1<m?c[d+1]:null),s.push(d+2<m?c[d+2]:null);a=l.a.createElement("div",{id:"section-to-print-type2"},r.map((function(e,a){return l.a.createElement(x,{key:a,lblLeft:r[a],lblMid:n[a],lblRight:s[a],type:t,id:a})})))}return a};t(45);var M=function(e){var a=e.loaderType;return 1===a?l.a.createElement("div",{id:"section-to-print-type1"},l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"})):2===a||3===a?l.a.createElement("div",{id:"section-to-print-type2"},l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"})):void 0},I=function(e,a){var t={validCode:!0,msgs:[]},c={code:"",desc:"",price:"",error:""};if(""===a)return t;for(var l=0;l<e.length;l++){c={code:e[l].code,desc:e[l].desc,price:e[l].price.substring(3),error:"-"};var r=[],n=!0;/\d\.\d{5}E\+12/.test(e[l].code)&&(t.validCode=!1,n=!1,c.code=e[l].code,r.push("c\xf3digo xlsx")),""!==e[l].code&&!1!==e[l].code||(t.validCode=!1,n=!1,c.code="",r.push("c\xf3digo vac\xedo")),""===e[l].desc&&(t.validCode=!1,n=!1,c.desc="",r.push("desc vac\xedo")),"S/ 0.00"===e[l].price&&(t.validCode=!1,n=!1,r.push("precio es cero")),n||(c.error=r.join(" - "),t.msgs.push(c))}return t},L=function(e,a){var t=[],c=function(){function e(a,t,c,l,r,n,s){Object(C.a)(this,e),this.code=t,this.desc=c,this.mCode=l,this.cats=r,this.price=this.currencyFormat(n),this.attr=this.attrPristine(s),this.qtt=Number(a)}return Object(k.a)(e,[{key:"attrPristine",value:function(e){return e?e.split(":")[1].trim().toUpperCase():""}},{key:"currencyFormat",value:function(e){return"S/ ".concat(Number(e).toFixed(2))}}]),Object(k.a)(e,[{key:"addAttr",value:function(e){this.attr+=" - ".concat(this.attrPristine(e))}}]),e}();if("INGRESAR"===a)for(var l=1;l<e.length-1;l++){var r=e[l];""===r.slice(0,8).join("")?t[t.length-1].addAttr(r[8]):t.push(new c(r[2],r[3],r[4],r[5],r[6],r[7],r[8]))}else if("REPO-CON-ATTR"===a)for(var n=1;n<e.length-1;n++){var s=e[n];""===s.slice(0,6).join("")?t[t.length-1].addAttr(s[6]):t.push(new c(1,s[1],s[2],s[3],s[4],s[5],s[6]))}else if("REPO-SIN-ATTR"===a)for(var m=1;m<e.length-1;m++){var d=e[m];t.push(new c(1,d[1],d[2],d[3],d[4],d[5],""))}else"LAMBDA"===a&&e.forEach((function(e){var a,l=!1===e.mCode?"":e.mCode;e.attr.length>0?e.attr.forEach((function(t,r){r?a.addAttr(t):a=new c(e.quantity,e.code,e.desc,l,e.cats,e.price,t)})):a=new c(e.quantity,e.code,e.desc,l,e.cats,e.price,""),t.push(a)}));return t};var P=function(e){var a=e.errorMsgs,t=e.closeErrorModal;return l.a.createElement("div",{className:"modal display-block"},l.a.createElement("div",{className:"modal-error"},l.a.createElement("p",{className:"text-error"},"ERROR"),l.a.createElement("table",{className:"t-error"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"C\xf3digo"),l.a.createElement("th",null,"Descripci\xf3n"),l.a.createElement("th",null,"Precio"),l.a.createElement("th",null,"Error"))),l.a.createElement("tbody",null,a.map((function(e,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null,e.code),l.a.createElement("td",null,e.desc),l.a.createElement("td",null,e.price),l.a.createElement("td",null,e.error))})))),l.a.createElement("div",{className:"bottom-btns"},l.a.createElement("button",{className:"btn btn-danger",onClick:t},"Aceptar"))))};function U(){return(U=Object(d.a)(m.a.mark((function e(a){var t,c,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(a.get("api"),"?poId=").concat(a.get("poId")),c={headers:{"x-api-key":a.get("key")}},e.prev=2,e.next=5,fetch(t,c);case 5:return e.next=7,e.sent.json();case 7:return l=e.sent,e.abrupt("return",200===l.statusCode?l.body:[]);case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}var z=function(e){return U.apply(this,arguments)};var D=function(){var e=Object(c.useState)("22"),a=Object(o.a)(e,2),t=a[0],r=a[1],n=Object(c.useState)([]),s=Object(o.a)(n,2),i=s[0],E=s[1],u=Object(c.useState)(""),y=Object(o.a)(u,2),f=y[0],g=y[1],j=Object(c.useState)(1),O=Object(o.a)(j,2),C=O[0],k=O[1],q=Object(c.useState)(!0),A=Object(o.a)(q,2),w=A[0],T=A[1],S=Object(c.useState)(!1),x=Object(o.a)(S,2),U=x[0],D=x[1],F=Object(c.useState)(!1),B=Object(o.a)(F,2),G=B[0],H=B[1],J=Object(c.useState)(!1),W=Object(o.a)(J,2),$=W[0],K=W[1],Q=Object(c.useState)(!0),V=Object(o.a)(Q,2),X=V[0],Y=V[1],Z=Object(c.useState)([]),_=Object(o.a)(Z,2),ee=_[0],ae=_[1],te=Object(c.useState)(!1),ce=Object(o.a)(te,2),le=ce[0],re=ce[1],ne=Object(c.useState)(1),se=Object(o.a)(ne,2),me=se[0],de=se[1];return Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var a,t,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new URLSearchParams(window.location.search),t=[],!a.has("api")){e.next=13;break}return re(!0),e.t0=L,e.next=7,z(a);case 7:e.t1=e.sent,t=(0,e.t0)(e.t1,"LAMBDA"),(c=I(t,"api-file")).validCode||(t=[]),Y(c.validCode),ae(c.msgs);case 13:setTimeout((function(){re(!1),E(t)}),1);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),l.a.createElement("div",null,l.a.createElement("div",{className:"top-header"},l.a.createElement("div",{className:"header"},l.a.createElement("div",{className:"col-1"},l.a.createElement("div",{key:t,className:"file-container"},l.a.createElement(b.a,{inputId:"file-upload",onFileLoaded:function(e,a){return function(e,a){var t="";9===e[0].length?t="INGRESAR":7===e[0].length?t="REPO-CON-ATTR":6===e[0].length&&(t="REPO-SIN-ATTR");var c=L(e,t),l=I(c,a.name);l.validCode||(c=[]),Y(l.validCode),ae(l.msgs);var n=Math.random().toString(36);r(n),g(a.name),re(!0),setTimeout((function(){re(!1),E(c)}),1)}(e,a)}}),l.a.createElement("div",{className:"mask"},f)),l.a.createElement("div",{id:"no-print"},l.a.createElement("button",{onClick:function(){return window.print()}},"PRINT")),l.a.createElement("button",{className:"btn-modal",onClick:function(){K(!0)}},"Cantidades")),l.a.createElement("div",{className:"col-2"},l.a.createElement("div",{className:"btn-group"},l.a.createElement("button",{className:w?"btn-bctype active":"btn-bctype",onClick:function(){D(!1),H(!1),T(!0),re(!0),de(1),setTimeout((function(){re(!1),k(1)}),1)}},l.a.createElement("img",{src:p.a,alt:""})),l.a.createElement("button",{className:U?"btn-bctype active":"btn-bctype",onClick:function(){T(!1),H(!1),D(!0),re(!0),de(2),setTimeout((function(){re(!1),k(2)}),1)}},l.a.createElement("img",{src:v.a,alt:""})),l.a.createElement("button",{className:G?"btn-bctype active":"btn-bctype",onClick:function(){T(!1),D(!1),H(!0),re(!0),de(3),setTimeout((function(){re(!1),k(3)}),1)}},l.a.createElement("img",{src:N.a,alt:""}))))),l.a.createElement("h1",{className:"lbl-total"},"Etiquetas: ",le?"cargando":i.reduce((function(e,a){return e+a.qtt}),0),le?l.a.createElement("div",{className:"lds-dual-ring"}):null)),le?l.a.createElement(M,{loaderType:me}):l.a.createElement(R,{bcType:C,labelsUniq:i}),$?l.a.createElement(h,{labels:i,setLabelsUniq:E,setModalActive:K,modalActive:$,setIsLoading:re}):null,X?null:l.a.createElement(P,{errorMsgs:ee,closeErrorModal:function(){Y(!0),ae([])}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[22,1,2]]]);
//# sourceMappingURL=main.642952fb.chunk.js.map
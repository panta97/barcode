(this.webpackJsonpbarcode=this.webpackJsonpbarcode||[]).push([[0],{12:function(e,a,t){},18:function(e,a,t){e.exports=t(43)},23:function(e,a,t){},25:function(e,a,t){},26:function(e,a,t){},27:function(e,a,t){},41:function(e,a,t){},42:function(e,a,t){},43:function(e,a,t){"use strict";t.r(a);var c=t(0),l=t.n(c),r=t(13),n=t.n(r),s=(t(23),t(2)),m=t.n(s),d=t(4),i=t(1),o=t(14);t(25);function p(){return(p=Object(d.a)(m.a.mark((function e(a){var t,c,l,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.get("model"),c=a.get("id"),l="".concat(a.get("api"),"?model=").concat(t,"&id=").concat(c),r={headers:{"x-api-key":a.get("key")}},e.prev=4,e.next=7,fetch(l,r);case 7:return e.next=9,e.sent.json();case 9:return n=e.sent,e.abrupt("return",200===n.statusCode?n.body:[]);case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})))).apply(this,arguments)}var u=function(e){return p.apply(this,arguments)},v=(t(26),t(27),t(6)),E=t.n(v);t(12);var N=function(e){var a=e.label,t=a.code,c=a.desc,r=a.mCode,n=a.cats,s=a.price,m=a.attr,d=e.type;return e.id,1===d?l.a.createElement("div",{className:"type-1"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"top"},l.a.createElement("h2",{className:"price"},s),l.a.createElement("p",{className:"cat"},n)),l.a.createElement("div",{className:"middle"},l.a.createElement("div",{className:"d-attr"},l.a.createElement("p",{className:"attr"},m)),l.a.createElement("div",{className:"barcode"},l.a.createElement(E.a,{value:t,size:100,level:"H",renderAs:"svg"})),l.a.createElement("div",{className:"d-fa-code"},l.a.createElement("p",{className:"fa-code"},r))),l.a.createElement("div",{className:"bottom"},l.a.createElement("p",{className:"code"},t),l.a.createElement("p",{className:"desc"},c)))):2===d?l.a.createElement("div",{className:"type-2"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"left-side"},l.a.createElement("h2",{className:"price"},s),l.a.createElement("p",{className:"cat"},n),l.a.createElement("p",{className:"fa-code"},""===r?"-":r),l.a.createElement("p",{className:"desc"},c),l.a.createElement("p",{className:"attr"},m)),l.a.createElement("div",{className:"right-side"},l.a.createElement("div",{className:"barcode"},l.a.createElement(E.a,{value:t,size:50,level:"H",renderAs:"svg"})),l.a.createElement("p",{className:"code"},t)))):void 0},y=t(5),b=t(3),f=t(17),h=t(16),g=t(15),O=t.n(g),C=function(e){Object(f.a)(t,e);var a=Object(h.a)(t);function t(){return Object(y.a)(this,t),a.apply(this,arguments)}return Object(b.a)(t,[{key:"componentDidMount",value:function(){try{var e={bcid:this.props.codeType,text:this.props.value,scale:this.props.scale,includetext:!1,textxalign:"center"};O.a.toCanvas(this.props.id,e)}catch(a){}}},{key:"render",value:function(){return l.a.createElement("canvas",{id:this.props.id,style:{width:"45px"}})}}]),t}(c.Component);var j=function(e){var a=e.lblLeft,t=e.lblMid,c=e.lblRight,r=e.id;return l.a.createElement("div",{className:"type-3"},l.a.createElement("div",{className:"container"},l.a.createElement("div",null,l.a.createElement("h2",{className:"price"},a.price),l.a.createElement("div",{className:"barcode"},l.a.createElement(C,{codeType:"microqrcode",value:a.code,scale:12,size:100,id:"".concat(r,"l")})),l.a.createElement("p",{className:"code"},a.code)),t&&l.a.createElement("div",null,l.a.createElement("h2",{className:"price"},t.price),l.a.createElement("div",{className:"barcode"},l.a.createElement(C,{codeType:"microqrcode",value:t.code,scale:12,size:100,id:"".concat(r,"m")})),l.a.createElement("p",{className:"code"},t.code)),c&&l.a.createElement("div",null,l.a.createElement("h2",{className:"price"},c.price),l.a.createElement("div",{className:"barcode"},l.a.createElement(C,{codeType:"microqrcode",value:c.code,scale:12,size:100,id:"".concat(r,"r")})),l.a.createElement("p",{className:"code"},c.code))))};var k=function(e){var a,t=e.bcType,c=function(e){for(var a=[],t=0;t<e.length;t++)for(var c=Object.assign({},e[t]),l=0;l<c.qtt;l++)a.push(c);return a}(e.labelsUniq);if(1===t)a=l.a.createElement("div",{id:"section-to-print-type1"},c.map((function(e,a){return l.a.createElement(N,{key:a,label:e,type:t,id:a})})));else if(2===t)a=l.a.createElement("div",{id:"section-to-print-type2"},c.map((function(e,a){return l.a.createElement(N,{key:a,label:e,type:t,id:a})})));else if(3===t){for(var r=[],n=[],s=[],m=c.length,d=0;d<m;d+=3)r.push(c[d]),n.push(c[d+1]),s.push(c[d+2]);a=l.a.createElement("div",{id:"section-to-print-type2"},r.map((function(e,a){return l.a.createElement(j,{key:a,lblLeft:r[a],lblMid:n[a],lblRight:s[a],id:a})})))}return a};t(41);var q=function(e){var a=e.loaderType;return 1===a?l.a.createElement("div",{id:"section-to-print-type1"},l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"}),l.a.createElement("div",{className:"loader-type-1"})):2===a||3===a?l.a.createElement("div",{id:"section-to-print-type2"},l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"}),l.a.createElement("div",{className:"loader-type-2"})):void 0},x=(t(42),function(e,a){var t={validCode:!0,msgs:[]},c={code:"",desc:"",price:"",error:""};if(""===a)return t;for(var l=0;l<e.length;l++){c={code:e[l].code,desc:e[l].desc,price:e[l].price.substring(3),error:"-"};var r=[],n=!0;/\d\.\d{5}E\+12/.test(e[l].code)&&(t.validCode=!1,n=!1,c.code=e[l].code,r.push("c\xf3digo xlsx")),""!==e[l].code&&!1!==e[l].code||(t.validCode=!1,n=!1,c.code="",r.push("c\xf3digo vac\xedo")),""===e[l].desc&&(t.validCode=!1,n=!1,c.desc="",r.push("desc vac\xedo")),"S/ 0.00"===e[l].price&&(t.validCode=!1,n=!1,r.push("precio es cero")),n||(c.error=r.join(" - "),t.msgs.push(c))}return t});var w=function(e){var a=e.errorMsgs,t=e.closeErrorModal;return l.a.createElement("div",{role:"dialog",className:"modal display-block"},l.a.createElement("div",{className:"modal-error"},l.a.createElement("p",{className:"text-error"},"ERROR"),l.a.createElement("table",{className:"t-error"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"C\xf3digo"),l.a.createElement("th",null,"Descripci\xf3n"),l.a.createElement("th",null,"Precio"),l.a.createElement("th",null,"Error"))),l.a.createElement("tbody",null,a.map((function(e,a){return l.a.createElement("tr",{key:a},l.a.createElement("td",null,e.code),l.a.createElement("td",null,e.desc),l.a.createElement("td",null,e.price),l.a.createElement("td",null,e.error))})))),l.a.createElement("div",{className:"bottom-btns"},l.a.createElement("button",{className:"btn btn-danger",onClick:t},"Aceptar"))))};var A=function(e){var a=e.code,t=e.desc,c=e.attr,r=e.mCode,n=e.qttInMem,s=e.onChange;return l.a.createElement("tr",null,l.a.createElement("td",{className:"t-code"},a),l.a.createElement("td",{className:"t-desc"},t),l.a.createElement("td",{className:"t-attr"},""===c?"-":c),l.a.createElement("td",{className:"t-fa-code"},""===r?"-":r),l.a.createElement("td",{className:"t-quantity"},l.a.createElement("input",{className:"inp-quantity",type:"number",min:0,max:999,value:n,onChange:function(e){return s(a,e.target.value)},onFocus:function(e){return e.target.select()}})))};var T=function(e){var a=e.labels,t=e.setLabelsUniq,r=e.setModalActive,n=e.modalActive,s=e.setIsLoading,m=a.map((function(e){return{code:e.code,desc:e.desc,attr:e.attr,mCode:e.mCode,qtt:e.qtt}})),d=Object(c.useState)(m),o=Object(i.a)(d,2),p=o[0],u=o[1],v=function(e,a){var t=p.map((function(t){return t.code===e&&(a>=999&&(a=999),t.qtt=a),t}));u(t)};return l.a.createElement("div",{role:"dialog",className:n?"modal display-block":"modal display-none"},l.a.createElement("section",{className:"modal-qq"},l.a.createElement("div",{className:"t-top"},l.a.createElement("button",{className:"close-modal",tabIndex:"-1",onClick:function(){r(!1);var e=a.map((function(e){return{code:e.code,desc:e.desc,attr:e.attr,mCode:e.mCode,qtt:e.qtt}}));u(e)}},"\xd7")),l.a.createElement("table",{className:"t-lbls"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"t-code"},"C\xf3digo"),l.a.createElement("th",{className:"t-desc"},"Descripci\xf3n"),l.a.createElement("th",{className:"t-attr"},"Attr"),l.a.createElement("th",{className:"t-fa-code"},"C. Fab"),l.a.createElement("th",{className:"t-quantity"},"Cantidad"))),l.a.createElement("tbody",null,p.map((function(e,a){return l.a.createElement(A,{code:e.code,desc:e.desc,attr:e.attr,mCode:e.mCode,qttInMem:e.qtt,onChange:v,key:a})})))),l.a.createElement("div",{className:"bottom-btns"},l.a.createElement("button",{className:"btn btn-success",onClick:function(){r(!1);var e=p.map((function(e,t){var c=Number(e.qtt);return a[t].qtt=isNaN(c)?0:c,a[t]}));s(!0),setTimeout((function(){s(!1),t(e)}),1)}},"Aceptar"))))},S=function(e,a){var t=[],c=function(){function e(a,t,c,l,r,n,s){Object(y.a)(this,e),this.code=t,this.desc=c,this.mCode=l,this.cats=r,this.price=this.currencyFormat(n),this.attr=this.attrPristine(s),this.qtt=Number(a)}return Object(b.a)(e,[{key:"attrPristine",value:function(e){return e?e.split(":")[1].trim().toUpperCase():""}},{key:"currencyFormat",value:function(e){return new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN"}).format(e)}}]),Object(b.a)(e,[{key:"addAttr",value:function(e){this.attr+=" - ".concat(this.attrPristine(e))}}]),e}();if("INGRESAR"===a)for(var l=1;l<e.length-1;l++){var r=e[l];""===r.slice(0,8).join("")?t[t.length-1].addAttr(r[8]):t.push(new c(r[2],r[3],r[4],r[5],r[6],r[7],r[8]))}else if("REPO-CON-ATTR"===a)for(var n=1;n<e.length-1;n++){var s=e[n];""===s.slice(0,6).join("")?t[t.length-1].addAttr(s[6]):t.push(new c(1,s[1],s[2],s[3],s[4],s[5],s[6]))}else if("REPO-SIN-ATTR"===a)for(var m=1;m<e.length-1;m++){var d=e[m];t.push(new c(1,d[1],d[2],d[3],d[4],d[5],""))}else"LAMBDA"===a&&e.forEach((function(e){var a,l=!1===e.mCode?"":e.mCode;e.attr.length>0?e.attr.forEach((function(t,r){r?a.addAttr(t):a=new c(e.quantity,e.code,e.desc,l,e.cats,e.price,t)})):a=new c(e.quantity,e.code,e.desc,l,e.cats,e.price,""),t.push(a)}));return t};var R=function(){var e=Object(c.useState)([]),a=Object(i.a)(e,2),t=a[0],r=a[1],n=Object(c.useState)(""),s=Object(i.a)(n,2),p=s[0],v=s[1],E=Object(c.useState)(1),N=Object(i.a)(E,2),y=N[0],b=N[1],f=Object(c.useState)(!0),h=Object(i.a)(f,2),g=h[0],O=h[1],C=Object(c.useState)(!1),j=Object(i.a)(C,2),A=j[0],R=j[1],I=Object(c.useState)(!1),M=Object(i.a)(I,2),P=M[0],L=M[1],F=Object(c.useState)(!1),U=Object(i.a)(F,2),z=U[0],D=U[1],B=Object(c.useState)(!0),G=Object(i.a)(B,2),H=G[0],J=G[1],W=Object(c.useState)([]),$=Object(i.a)(W,2),K=$[0],Q=$[1],V=Object(c.useState)(!1),X=Object(i.a)(V,2),Y=X[0],Z=X[1],_=Object(c.useState)(1),ee=Object(i.a)(_,2),ae=ee[0],te=ee[1],ce=Object(c.useRef)(null);Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(m.a.mark((function e(){var a,t,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new URLSearchParams(window.location.search),t=[],!a.has("api")){e.next=14;break}return Z(!0),"purchase.order"===a.get("model")&&v("PO".concat(a.get("id").padStart(5,"0"))),e.t0=S,e.next=8,u(a);case 8:e.t1=e.sent,t=(0,e.t0)(e.t1,"LAMBDA"),(c=x(t,"api-file")).validCode||(t=[]),J(c.validCode),Q(c.msgs);case 14:setTimeout((function(){Z(!1),r(t)}),1);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var le=function(e){var a={1:!1,2:!1,3:!1};a[String(e)]=!0,O(a[1]),R(a[2]),L(a[3]),Z(!0),te(Number(e)),setTimeout((function(){Z(!1),b(Number(e))}),1)};return l.a.createElement("div",null,l.a.createElement("div",{className:"top-header"},l.a.createElement("div",{className:"header"},l.a.createElement("div",{className:"col-1"},l.a.createElement("button",{className:"btn-csv",onClick:function(e){return ce.current.click()},tabIndex:z?-1:0},"Seleccionar"),l.a.createElement("input",{type:"file",accept:".csv, text/csv",ref:ce,style:{display:"none"},onChange:function(e){if(e.target.files.length>0){var a=new FileReader,t=e.target.files[0],c={name:e.target.files[0].name};a.onload=function(e){!function(e,a){var t="";9===e[0].length?t="INGRESAR":7===e[0].length?t="REPO-CON-ATTR":6===e[0].length&&(t="REPO-SIN-ATTR");var c=S(e,t),l=x(c,a.name);l.validCode||(c=[]),J(l.validCode),Q(l.msgs),v(a.name),Z(!0),setTimeout((function(){Z(!1),r(c)}),1)}(Object(o.parse)(a.result,Object.assign({},{encoding:"UTF-8"})).data,c)},a.readAsText(t,"UTF-8")}},onClick:function(e){e.target.value=null}}),l.a.createElement("div",{id:"no-print"},l.a.createElement("button",{className:"btn-print",onClick:function(){return window.print()},tabIndex:z?-1:0},"Imprimir")),l.a.createElement("button",{className:"btn-modal",onClick:function(){D(!0)},tabIndex:z?-1:0},"Cantidades")),l.a.createElement("div",{className:"col-2"},l.a.createElement("div",{className:"filename"},p)),l.a.createElement("div",{className:"col-3"},l.a.createElement("div",{className:"btn-group"},l.a.createElement("button",{className:g?"btn-bctype active":"btn-bctype",onClick:function(){return le(1)},tabIndex:z?-1:0},l.a.createElement("div",{className:"img-type-1"})),l.a.createElement("button",{className:A?"btn-bctype active":"btn-bctype",onClick:function(){return le(2)},tabIndex:z?-1:0},l.a.createElement("div",{className:"img-type-2"})),l.a.createElement("button",{className:P?"btn-bctype active":"btn-bctype",onClick:function(){return le(3)},tabIndex:z?-1:0},l.a.createElement("div",{className:"img-type-3"}))))),l.a.createElement("h1",{className:"lbl-total"},"Etiquetas: ",Y?"cargando":t.reduce((function(e,a){return e+a.qtt}),0),Y?l.a.createElement("div",{className:"lds-dual-ring"}):null)),Y?l.a.createElement(q,{loaderType:ae}):l.a.createElement(k,{bcType:y,labelsUniq:t}),z?l.a.createElement(T,{labels:t,setLabelsUniq:r,setModalActive:D,modalActive:z,setIsLoading:Z}):null,H?null:l.a.createElement(w,{errorMsgs:K,closeErrorModal:function(){J(!0),Q([])}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.e8ddc92a.chunk.js.map